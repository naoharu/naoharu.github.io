
<!DOCTYPE html>
<html lang="en-us">
<head>

  
  <meta charset="UTF-8">
  <title>
    DBUnit@Oracle DB時のAmbiguousTableNameException | 順道制勝
  </title>


  
  <meta name="viewport" content="width=device-width,user-scalable=no,maximum-scale=1,initial-scale=1">

  
  <link rel="canonical" href="https://naoharu.github.io/archives/12239"/>

  
  <link rel="stylesheet" href="/css/sanitize.css">
  <link rel="stylesheet" href="/css/responsive.css">
  <link rel="stylesheet" href="/css/highlight_monokai.css">
  <link rel="stylesheet" href="/css/theme.css">
  <link rel="stylesheet" href="/css/custom.css">
  
  
  <link href="https://naoharu.github.io/index.xml" rel="alternate" type="application/rss+xml" title="順道制勝" />
  <link href="https://naoharu.github.io/index.xml" rel="feed" type="application/rss+xml" title="順道制勝" />

  
  


</head>



<body>
<div class="container">

  
  <header role="banner">
    <div class="row gutters">
      <div id="site-title" class="col span_6">
        <h1><a href="https://naoharu.github.io/">順道制勝</a></h1>
        
      </div>
      <div id="social" class="col span_6">
        <ul>
          
          
          
          
        </ul>
      </div>
    </div>
  </header>


  
  <main id="single" role="main">
    <div class="article-header">
      <h1>DBUnit@Oracle DB時のAmbiguousTableNameException</h1>
      <div class="meta">
        Feb 13, 2016 &nbsp;
        
          #<a href="/tags/dbunit">dbunit</a>&nbsp;
        
          #<a href="/tags/java">java</a>&nbsp;
        
      </div>
    </div>
    <article>
      <p>これまたオールドスクールなツールを使っていて問題発生。</p>

<p>DBUnitを使って単体テストを実施していた時なのだけど、下記の例外に遭遇。</p>

<blockquote>
<p>org.dbunit.database.AmbiguousTableNameException: AQ$_SCHEDULES</p>

<p>　at org.dbunit.database.DatabaseDataSet.initialize(DatabaseDataSet.java:140)</p>

<p>　at org.dbunit.database.DatabaseDataSet.getTableMetaData(DatabaseDataSet.java:186)</p>

<p>　at org.dbunit.operation.DeleteAllOperation.execute(DeleteAllOperation.java:98)</p>

<p>　at org.dbunit.operation.CompositeOperation.execute(CompositeOperation.java:67)</p>

<p>&#8230;</p>
</blockquote>

<p>どうやらOracleを使っていて違うschemaに同じtable名が存在するとこうなっていて、</p>

<p>この時は<a href="http://dbunit.sourceforge.net/apidocs/org/dbunit/database/AmbiguousTableNameException.html">コネクション生成するときにschemaを指定すべし</a>とのこと。</p>

<blockquote>
<p>This exception is thrown by IDataSet when multiple tables having the same name are accessible. This usually occurs when the database connection have access to multiple schemas containing identical table names.</p>

<p>Possible solutions:</p>

<p>1) Use a database connection credential that has access to only one database schema.</p>

<p>2) Specify a schema name to the DatabaseConnection or DatabaseDataSourceConnection constructor.</p>

<p>3) Enable the qualified table name support (see How-to documentation).</p>

<p>Another common reason for this exception to be thrown is when an XML file contains the same table multiple times whereas a different table is between the definition of the duplicate table.</p>
</blockquote>

<p>2の案ね。</p>

<p>どうでも良いけど<a href="http://www.dbunit.org/">DBUnit.orgの本家サイトがドメイン切れて税理士紹介サイトに取られてる</a>。</p>

      
      
      
    </article>
    


  </main>
  
  <nav class="pagination-single">
    
      <span class="previous">&larr; <a href="https://naoharu.github.io/archives/12233" rel="prev">Central America Trip 8</a></span>
    
    
      <span class="next"><a href="https://naoharu.github.io/archives/12244" rel="next">重曹でクライミングシューズの臭いを消す</a> &rarr;</span>
    
  </nav>


  
  <footer role="contentinfo">
    <div style="text-align:center;">
      
      
    </div>
  </footer>


</div>

<script src="/js/highlight.pack.js"></script>
<script>hljs.initHighlightingOnLoad();</script>



</body>
</html>

